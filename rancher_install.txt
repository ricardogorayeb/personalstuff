## Install Docker 20.10 (https://www.suse.com/assets/v2.5.16-Support-Matrix.pdf)

curl https://releases.rancher.com/install-docker/20.10.sh | sh


## Setup sysctl options for Docker
cat > /etc/sysctl.d/10-iptables.conf << EOF
net.bridge.bridge-nf-call-ip6tables = 1
net.bridge.bridge-nf-call-iptables = 1
net.ipv4.ip_forward = 1
EOF
sysctl -p

## For Rancher 1.6.x
docker run -d --restart=unless-stopped \
	-p 80:80 -p 443:443 \
	--privileged \
	rancher/server:stable

## For Rancher 2 
docker run -d --restart=unless-stopped \
  	-p 80:80 -p 443:443 --privileged  \
	rancher/rancher:latest

## To discover password for Rancher 2:
docker logs `docker container ls | grep rancher | awk '{ print $1 }'`  2>&1 | grep "Bootstrap Password:"





#Registry
 - need to add gitlab certificates to docker host running gitlab-runner on
   /etc/docker/certs.d/
 - restart docker
 - enable it on /etc/gitlab/gitlab.rb
 - gitlab-ctl reconfigure
